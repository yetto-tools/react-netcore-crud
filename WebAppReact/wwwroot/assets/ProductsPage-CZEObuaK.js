import{l as q,P as x,u as V,j as e,f as B,r as p,b as G,c as H,e as J,L as K,g as Q,h as W,i as X,k as Y,M as Z}from"./index-L-HAyuod.js";import{A as f,a as i}from"./useFetchDataStore-x80iMu5I.js";import{c as F,d as ee}from"./TypesForm-D4Kl22kW.js";import{P as se}from"./ProductForm-DOOU8QXA.js";import{S as te}from"./SeachInput-Buiba88K.js";import{P as ae}from"./Pagination-7E88qrJq.js";import"./useCategoriesStore-CWuT7hnw.js";const ne=q(n=>({products:[],setProducts:a=>n({products:a})})),T=({children:n})=>{const{t:a}=V();return e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"w-full flex mx-auto border justify-between items-center gap-4 px-4 bg-gray-800 text-white",children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("products.form.field.name")})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("products.form.field.description")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("products.form.field.state")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("products.change")})," "]})]}),e.jsx("article",{className:"overflow-y-scroll h-96 w-full",children:n})]})},M=({t:n,products:a,handleUpdate:c,loading:d})=>e.jsx(e.Fragment,{children:a.map((u,m)=>e.jsxs("div",{className:`w-full flex mx-auto border justify-between items-center  gap-4 px-4 py-2.5 text-slate-800 ${m%2==0?"bg-slate-100":"bg-white"} `,children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:u.nombre})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:u.descripcion||"-"})," "]}),e.jsx("div",{className:"w-2/12 text-center",children:e.jsx("span",{className:"capitalize text-center font-semibold inline-flex justify-center w-full items-center",children:u.estado==1?e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-sky-700 bg-sky-200 border-sky-700 font-semibold",children:n("state.active")}):e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-gray-700 bg-gray-200 border-gray-700 font-semibold",children:n("state.inactive")})})}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:e.jsxs("button",{value:u.id_producto,className:`max-w-24 rounded-sm text-xs outline-orange-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${d?"bg-orange-600/50":"bg-orange-600 active:scale-95 shadow"}`,onClick:c,type:"button",disabled:d,children:[e.jsx("span",{children:e.jsx(B,{})}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${d?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})," "]})]},`${u.id_producto}${m}`))});T.propTypes={children:x.node};M.propTypes={t:x.func,products:x.any,handleUpdate:x.func,loading:x.bool,index:x.number};const pe=()=>{var S,I,z,$,L,_,C;const{t:n}=V(),[a,c]=p.useState(F),[d,u]=p.useState(""),[m,oe]=p.useState(1);p.useState(25);const[v,N]=p.useState(!1),{auth:j}=G(t=>({auth:t.auth})),{isLoading:o,setIsLoading:b}=H(t=>({isLoading:t.isLoading,setIsLoading:t.setIsLoading})),{products:s,setProducts:h}=ne(t=>({products:t.products,setProducts:t.setProducts}));p.useEffect(()=>{var l;let t=(l=j==null?void 0:j.userData)==null?void 0:l.id_usuario;c(r=>({...r,uid_creacion:Number(t)})),Object.values(s).length==0&&o==!1&&P()},[]);const P=p.useCallback(async()=>{await f({setStore:h,url:`${i.product.products.url}?page_size=25&page_number=${m}`,method:i.product.products.method,setIsLoading:b})},[f,m]),D=t=>{const{name:l,value:r,type:w,checked:g}=t.target,y=w==="checkbox"?g?1:0:r;c(U=>({...U,[l]:y}))},A=async t=>{var l,r;t.preventDefault(),console.log(a),await f({setStore:h,url:i.product.save.url,method:i.product.save.method,body:a,setIsLoading:b}),(l=s==null?void 0:s.data)!=null&&l.response&&console.log((r=s==null?void 0:s.data)==null?void 0:r.response)},k=()=>N(!0),E=()=>{c(F),N(!1)},O=async()=>{d.trim().length>0?await f({setStore:h,url:`${i.product.products.url}?value=${d}`,method:i.product.products.method,setIsLoading:b}):await f({setStore:h,url:`${i.product.products.url}?page_size=25&page_number=${m}`,method:i.product.products.method,setIsLoading:b})},R=t=>{var g;const l=t.currentTarget.value,r=(g=s==null?void 0:s.data)==null?void 0:g.content.find(y=>y.id_producto===Number(l)),w=ee(r);c(w),k()};return e.jsx(J,{children:e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("section",{className:"bg-white px-4 pt-4 inline-flex justify-between items-center w-full border-b mb-4 ",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-1 pr-4 inline-flex items-center gap-2",children:[e.jsxs(K,{to:"/",children:[" ",n("home.title")]}),e.jsx(Q,{}),e.jsx("span",{children:n("products.title")})]}),e.jsx("span",{children:e.jsx("button",{className:"bg-orange-400 text-white p-1 shadow hover:scale-95",value:"refresh",onClick:P,children:e.jsx(W,{})})})]}),e.jsx("section",{className:"w-full bg-white divide-y border-b pb-4 mb-2.5",children:e.jsxs("section",{className:"w-full px-5 mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"w-44",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${o?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:k,type:"submit",disabled:o,children:[e.jsx(X,{}),n("categories.new"),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${o?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(te,{searchValue:d,setSearchValue:u}),e.jsxs("button",{className:`max-w-24 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${o?"bg-sky-600/50":"bg-sky-600 active:scale-95 shadow"}`,onClick:O,type:"button",disabled:o,children:[e.jsx(Y,{}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${o?"animate-shineInfinity":"group-hover:animate-shine"} `})]})]})]})}),e.jsxs("section",{className:"md:w-11/12 lg:w-full min-h-96 flex flex-col justify-between items-center mx-auto ",children:[e.jsx("div",{className:"w-full flex h-5/6  min-h-96 justify-start items-center flex-col border mb-4 pb-2",children:e.jsx(T,{children:e.jsx(M,{t:n,products:s&&((I=(S=s==null?void 0:s.data)==null?void 0:S.content)==null?void 0:I.length)>0&&((z=s==null?void 0:s.data)==null?void 0:z.content)!=null?($=s==null?void 0:s.data)==null?void 0:$.content:[],handleUpdate:R,loading:o})})}),e.jsx(ae,{page:m,totalPages:s&&((_=(L=s==null?void 0:s.data)==null?void 0:L.response)==null?void 0:_.length)>0?(C=s==null?void 0:s.data)==null?void 0:C.response[0].total_pages:0,setPage:h,loading:o})]}),e.jsx(Z,{isOpen:v,onClose:E,children:e.jsx(se,{loading:o,formValues:a,setFormValue:c,handleChange:D,handleSubmit:A,isModalOpen:v})})]})})};export{pe as default};
//# sourceMappingURL=ProductsPage-CZEObuaK.js.map
