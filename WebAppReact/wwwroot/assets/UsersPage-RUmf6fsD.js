import{l as B,P as i,u as N,b as D,r as u,j as e,I as H,f as R,e as Z,L as G,i as J,M as K}from"./index-CHpfbjfg.js";import{A as Q,a as x}from"./useFetchDataStore-CLW1Y08h.js";import{d as U,e as X}from"./TypesForm-Cdvw3PX5.js";import{S as Y}from"./SeachInput-Bxux4u4B.js";import{P as ee}from"./Pagination-CeulY0yV.js";const se=B(l=>({users:[],setUsers:a=>l({users:a})})),I=({loading:l,formValues:a,setFormValue:o,handleChange:r,handleSubmit:c})=>{const{t:s}=N(),{auth:f}=D(m=>({user:m.user}));return u.useEffect(()=>{var g;let m=(g=f==null?void 0:f.userData)==null?void 0:g.id_usuario;o(j=>({...j,uid_creacion:m}))},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"md:w-10/12 min-h-96 flex flex-col justify-between items-center mx-auto my-10 border",children:e.jsxs("form",{className:"flex flex-wrap justify-between items-center gap-x-4 p-10",children:[e.jsxs("div",{className:"flex justify-between items-center gap-4 w-full",children:[e.jsx("section",{className:"w-10/12 mx-auto inline-flex justify-start",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${l?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:c,type:"submit",disabled:l,children:[e.jsx("span",{children:e.jsx(H,{})}),e.jsx("span",{children:a.id_usuario==0?s("users.save"):s("users.change")}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${l?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.state")}),e.jsx("input",{type:"checkbox",name:"estado",className:"px-2 py-1.5 border outline-none focus:border-sky-500 w-5 h-10 bg-slate-50",placeholder:s("users.form.field.state"),onChange:r,checked:a.estado===1,required:!0})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("label",{className:"flex-1 flex-col hidden",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.id")}),e.jsx("input",{type:"hidden",name:"id_usuario",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.id"),onChange:r,value:a.id,disabled:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.username")}),e.jsx("input",{type:"text",name:"usuario",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.username"),onChange:r,value:a.usuario,required:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.email")}),e.jsx("input",{type:"text",name:"correo",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.email"),onChange:r,value:a.correo,required:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.password")}),e.jsx("input",{type:"password",name:"password",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.password"),onChange:r,value:a.password,required:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col hidden",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.created")}),e.jsx("input",{type:"hidden",name:"uid_creacion",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.created"),value:a.uid_creacion,onChange:r,required:!0,disabled:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("users.form.field.comment")}),e.jsx("textarea",{rows:"4",cols:"50",name:"comentario",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("users.form.field.comment"),onChange:r,value:a.comentario})]})]})]})})})};I.propTypes={loading:i.bool,formValues:i.object,setFormValue:i.func,handleChange:i.func,handleSubmit:i.func};const P=({children:l})=>{const{t:a}=N();return e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"w-full flex mx-auto border justify-between items-center gap-4 px-4 bg-gray-800 text-white",children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("users.form.field.username")})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("users.form.field.email")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("users.form.field.state")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("users.change")})," "]})]}),e.jsx("article",{className:"overflow-y-scroll h-96 w-full",children:l})]})},F=({t:l,users:a,handleUpdate:o,loading:r})=>e.jsx(e.Fragment,{children:a.map((c,s)=>e.jsxs("div",{className:`w-full flex mx-auto border justify-between items-center  gap-4 px-4 py-2.5 text-slate-800 ${s%2==0?"bg-slate-100":"bg-white"} `,children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:" font-semibold",children:c.nombre})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:" font-semibold",children:c.correo||"-"})," "]}),e.jsx("div",{className:"w-2/12 text-center",children:e.jsx("span",{className:"capitalize text-center font-semibold inline-flex justify-center w-full items-center",children:c.estado==1?e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-sky-700 bg-sky-200 border-sky-700 font-semibold",children:l("state.active")}):e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-gray-700 bg-gray-200 border-gray-700 font-semibold",children:l("state.inactive")})})}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:e.jsxs("button",{value:c.id_usuario,className:`max-w-24 rounded-sm text-xs outline-orange-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${r?"bg-orange-600/50":"bg-orange-600 active:scale-95 shadow"}`,onClick:o,type:"button",disabled:r,children:[e.jsx("span",{children:e.jsx(R,{})}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${r?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})," "]})]},`${c.id_usuario}${s}`))});P.propTypes={children:i.node};F.propTypes={t:i.func,users:i.any,handleUpdate:i.func,loading:i.bool,index:i.number};const ce=()=>{var S,_;const{t:l}=N(),[a,o]=u.useState(U),[r,c]=u.useState(""),[s,f]=u.useState(1),[m,g]=u.useState(25),[j,v]=u.useState(!1);D(t=>({auth:t.auth}));const{setUsers:L}=se(t=>({setProduct:t.setUsers})),{callApi:k,data:te,getData:C,getStatusCode:T,refreshData:z,loading:d,error:ae}=Q(t=>({callApi:t.callApi,data:t.data,getData:t.getData,getStatusCode:t.getStatusCode,refreshData:t.refreshData,loading:t.loading,error:t.error})),n=C(`${x.user.users.url}/?page_size=${m}&page_number=${s}`);u.useEffect(()=>{var t;(t=user==null?void 0:user.userData)!=null&&t.id_usuario&&o(p=>({...p,uid_creacion:user.userData.id_usuario}))},[user]);const h=u.useCallback(()=>{z(`${x.user.users.url}/?page_size=${m}&page_number=${s}`)},[z,s,m]);u.useEffect(()=>{h()},[s,h]);const M=t=>{const{name:p,value:b,type:w,checked:y}=t.target,V=w==="checkbox"?y?1:0:b;o(W=>({...W,[p]:V}))},A=t=>{t.preventDefault(),k(`${x.user.save.url}`,x.users.method,a),console(C(`${x.user.save.url}`)),console.log(T(`${x.user.save.url}/save`))},$=()=>v(!0),E=()=>{o(U),v(!1)},q=t=>{t.preventDefault(),k(`${x.users_search.url}`,x.users.method,a),h()},O=t=>{const p=t.currentTarget.value;console.log(t.currentTarget);const b=n.content.find(y=>y.id_usuario===Number(p));console.log(b);const w=X(b);o(w),$()};return e.jsx(Z,{children:e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("section",{className:"bg-white px-4 pt-4 inline-flex justify-between items-center w-full border-b mb-4 ",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-1 pr-4 inline-flex items-center gap-2",children:[e.jsxs(G,{to:"/",children:[" ",l("home.title")]}),e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"24px",width:"24px",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"})}),e.jsx("span",{children:l("users.title")})]}),e.jsx("span",{children:e.jsx("button",{className:"bg-orange-400 text-white p-1 shadow hover:scale-95",value:"refresh",onClick:h,children:e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"16px",width:"16px",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5.46257 4.43262C7.21556 2.91688 9.5007 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C9.84982 4 7.89777 4.84827 6.46023 6.22842L5.46257 4.43262ZM18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 9.86386 2.66979 7.88416 3.8108 6.25944L7 12H4C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"})})})})]}),e.jsx("section",{className:"w-full bg-white divide-y border-b pb-4 mb-2.5",children:e.jsxs("section",{className:"w-full px-5 mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"w-44",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${d?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:$,type:"submit",disabled:d,children:[e.jsx("span",{children:e.jsx(J,{})}),e.jsx("span",{children:l("categories.new")}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${d?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(Y,{searchValue:r,setSearchValue:c}),e.jsxs("button",{className:`max-w-24 w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${d?"bg-sky-600/50":"bg-sky-600 active:scale-95 shadow"}`,onClick:q,type:"button",disabled:d,children:[l("categories.search"),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${d?"animate-shineInfinity":"group-hover:animate-shine"} `})]})]})]})}),e.jsxs("section",{className:"md:w-11/12 lg:w-full min-h-96 flex flex-col justify-between items-center mx-auto ",children:[e.jsx("div",{className:"w-full flex h-5/6  min-h-96 justify-start items-center flex-col border mb-4 pb-2",children:e.jsx(P,{children:e.jsx(F,{t:l,users:n&&((S=n==null?void 0:n.content)==null?void 0:S.length)>0&&n.content!=null?n.content:[],handleUpdate:O,loading:d})})}),e.jsx(ee,{page:s,totalPages:n&&((_=n==null?void 0:n.response)==null?void 0:_.length)>0?n.response[0].total_pages:0,setPage:L,loading:d})]}),e.jsx(K,{isOpen:j,onClose:E,children:e.jsx(I,{loading:d,formValues:a,setFormValue:o,handleChange:M,handleSubmit:A})})]})})};export{ce as default};
//# sourceMappingURL=UsersPage-RUmf6fsD.js.map
