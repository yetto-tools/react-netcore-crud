{"version":3,"file":"LoginPage-vxovj6es.js","sources":["../../front-react/src/stores/useUsuarioStore.jsx","../../front-react/src/components/LoginForm.jsx","../../front-react/src/pages/LoginPage.jsx"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nconst useUsuarioStore = create((set) => ({\r\n  usuario: {\r\n    response: [],\r\n    content: [],\r\n    token: [],\r\n  },\r\n\r\n  setUsuario: (newData) => set({ usuario: newData }),\r\n\r\n  updateResponse: (newResponse) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        response: newResponse,\r\n      },\r\n    })),\r\n\r\n  updateContent: (newContent) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        content: newContent,\r\n      },\r\n    })),\r\n\r\n  updateToken: (newToken) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        token: newToken,\r\n      },\r\n    })),\r\n}));\r\n\r\nexport default useUsuarioStore;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { API } from \"../stores/API/Endpoints\";\r\nimport useFetchDataStore from \"../stores/useFetchDataStore\";\r\nimport useUsuarioStore from \"../stores/useUsuarioStore\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useAuthStore from \"../stores/useAuthStore\";\r\n\r\nexport const LoginForm = () => {\r\n  const { login } = useAuthStore(); // Extrae la función de login\r\n  const navigate = useNavigate();\r\n  const refLoginForm = useRef(null);\r\n  const { usuario } = useUsuarioStore((state) => ({\r\n    usuario: state.usuario,\r\n  }));\r\n\r\n  const { callApi, data, getData, loading, error } = useFetchDataStore(\r\n    (state) => ({\r\n      callApi: state.callApi,\r\n      data: state.data,\r\n      getData: state.getData,\r\n      loading: state.loading,\r\n      error: state.error,\r\n    })\r\n  );\r\n  // const { usuario, setUsuario, updateToken } = useUsuarioStore();\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(refLoginForm.current);\r\n    const username = formData.get(\"username\");\r\n    const password = formData.get(\"password\");\r\n    callApi(API.login.url, API.login.method, { username, password });\r\n  };\r\n\r\n  const datos = getData(API.login.url);\r\n\r\n  useEffect(() => {\r\n    console.log({ loading });\r\n    if (!loading) {\r\n      if (\r\n        datos &&\r\n        datos.response &&\r\n        datos.response.length > 0 &&\r\n        datos.response[0].message\r\n      ) {\r\n        // Esto mostrará un toast informativo con el mensaje\r\n        switch (datos[\"response\"][0][\"result\"]) {\r\n          case -1:\r\n            toast.error(`${datos[\"response\"][0][\"message\"]}`);\r\n            break;\r\n          case 0:\r\n            toast.warn(`${datos[\"response\"][0][\"message\"]}`);\r\n            break;\r\n          case 1:\r\n            login({\r\n              name: datos[\"content\"][0][\"nombre\"],\r\n              userData: datos[\"content\"][0],\r\n              token: datos[\"token\"][0],\r\n            }); // Ejecuta la acción de login\r\n            navigate(\"/\");\r\n            toast.success(`${datos[\"response\"][0][\"message\"]}`);\r\n            break;\r\n          default:\r\n            toast.info(`${datos[\"response\"][0][\"message\"]}`);\r\n        }\r\n\r\n        console.log(datos[\"response\"][0][\"message\"]); // Esto imprimirá el mensaje en la consola del navegador\r\n      }\r\n    }\r\n  }, [datos, loading]);\r\n\r\n  if (loading && !usuario) {\r\n    toast.error(`Enviado: ${\"autenticación\"}`);\r\n    return (\r\n      <>\r\n        <p className=\"font-semibold text-dsPrimaryLight px-2 py-2 bg-slate-50 border\">\r\n          Enviando...\r\n        </p>\r\n      </>\r\n    );\r\n  }\r\n  if (error) {\r\n    toast.error(`Error: ${error}`);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-white w-2/5 max-w-md  min-w-64 h-96 border p-4 shadow-md flex justify-center items-center\">\r\n        <form ref={refLoginForm} className=\"w-full\">\r\n          <div className=\"flex flex-col justify-between items-center gap-4 w-full \">\r\n            <div>\r\n              <span className=\"font-semibold text-2xl\">Bienvenido</span>\r\n            </div>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold\">Usuario</span>\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                placeholder=\"Usuario\"\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold\">Clave</span>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Clave\"\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <div className=\"flex flex-col flex-now justify-center items-center w-7/12 mx-auto mt-4\">\r\n              <button\r\n                className={`max-w-72 w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${\r\n                  !loading ? \"bg-sky-600 active:scale-95\" : \"bg-sky-600/50\"\r\n                }`}\r\n                onClick={handleLogin}\r\n                type=\"submit\"\r\n                disabled={loading}\r\n              >\r\n                Ingresar\r\n                <div\r\n                  className={`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${\r\n                    loading\r\n                      ? \"animate-shineInfinity\"\r\n                      : \"group-hover:animate-shine\"\r\n                  } `}\r\n                />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { LoginForm } from \"../components/LoginForm\";\r\n\r\nfunction LoginPage() {\r\n  return (\r\n    <div className=\"flex justify-center items-center w-screen h-screen\">\r\n      <LoginForm />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"names":["useUsuarioStore","create","set","newData","newResponse","state","newContent","newToken","LoginForm","login","useAuthStore","navigate","useNavigate","refLoginForm","useRef","usuario","callApi","data","getData","loading","error","useFetchDataStore","handleLogin","event","formData","username","password","API","datos","useEffect","toast","jsx","Fragment","jsxs","LoginPage"],"mappings":"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"}