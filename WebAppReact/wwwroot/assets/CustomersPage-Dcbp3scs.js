import{l as R,P as u,u as _,j as e,f as O,r,b as U,c as q,e as B,L as G,g as H,h as J,i as K,k as Q,M as W}from"./index-CHpfbjfg.js";import{A as f,a as c}from"./useFetchDataStore-CLW1Y08h.js";import{a as P,b as X}from"./TypesForm-Cdvw3PX5.js";import{P as Y}from"./ProductForm-BkwWXP64.js";import{S as Z}from"./SeachInput-Bxux4u4B.js";import{P as ee}from"./Pagination-CeulY0yV.js";import"./useCategoriesStore-BgZqZaC-.js";const se=R(n=>({customers:[],setCustomers:a=>n({customers:a})})),L=({children:n})=>{const{t:a}=_();return e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"w-full flex mx-auto border justify-between items-center gap-4 px-4 bg-gray-800 text-white",children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold tex.center",children:a("customers.form.field.tax_id")})," "]}),e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("customers.form.field.name")})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("customers.form.field.phone")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("customers.form.field.state")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:a("customers.actions")})," "]})]}),e.jsx("article",{className:"overflow-y-scroll h-96 w-full",children:n})]})},F=({t:n,customers:a,handleUpdate:d,loading:m})=>e.jsx(e.Fragment,{children:a.map((l,i)=>e.jsxs("div",{className:`w-full flex mx-auto border justify-between items-center  gap-4 px-4 py-2.5 text-slate-800 ${i%2==0?"bg-slate-100":"bg-white"} `,"data-id":l.id_cliente,children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:l.nit})," "]}),e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:l.nombre})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:l.telefono||"-"})," "]}),e.jsx("div",{className:"w-2/12 text-center",children:e.jsx("span",{className:"capitalize text-center font-semibold inline-flex justify-center w-full items-center",children:l.estado==1?e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-sky-700 bg-sky-200 border-sky-700 font-semibold",children:n("state.active")}):e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-gray-700 bg-gray-200 border-gray-700 font-semibold",children:n("state.inactive")})})}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:e.jsxs("button",{value:l.id_cliente,className:`max-w-24 rounded-sm text-xs outline-orange-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${m?"bg-orange-600/50":"bg-orange-600 active:scale-95 shadow"}`,onClick:d,type:"button",disabled:m,children:[e.jsx("span",{children:e.jsx(O,{})}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${m?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})," "]})]},`${l.id_cliente}${i}`))});L.propTypes={children:u.node};F.propTypes={t:u.func,customers:u.any,handleUpdate:u.func,loading:u.bool,index:u.number};const de=()=>{var z,S,I,$;const{t:n}=_(),[a,d]=r.useState(P),[m,l]=r.useState(""),[i,te]=r.useState(1);r.useState(25);const[V,y]=r.useState(!1),{auth:x}=U(t=>({user:t.auth})),{isLoading:o,setIsLoading:b}=q(t=>({isLoading:t.isLoading,setIsLoading:t.setIsLoading})),{customers:s,setCustomers:h}=se(t=>({customers:t.customers,setProduct:t.setCustomers}));r.useEffect(()=>{var t;(t=x==null?void 0:x.authData)!=null&&t.id_usuario&&d(p=>({...p,uid_creacion:x.userData.id_usuario}))},[x]);const j=r.useCallback(()=>{f({setStore:h,url:`${c.customer.customers.url}?page_size=25&page_number=${i}`,method:c.customer.customers.method,setIsLoading:b})},[f,i]);r.useEffect(()=>{j()},[i,j]);const T=t=>{const{name:p,value:w,type:v,checked:g}=t.target,N=v==="checkbox"?g?1:0:w;d(A=>({...A,[p]:N}))},M=t=>{t.preventDefault(),f({setStore:h,url:c.customer.save.url,method:c.customer.save.method,body:a,setIsLoading:b}),C()},k=()=>y(!0),C=()=>{d(P),y(!1)},D=()=>{m.trim().length>0?f({setStore:h,url:`${c.customer.search.url}?value=${m}`,method:c.customer.search.method,setIsLoading:b}):f({setStore:h,url:`${c.customer.customers.url}?page_size=25&page_number=${i}`,method:c.customer.customers.method,setIsLoading:b})},E=t=>{var g;const p=t.currentTarget.value,w=(g=s==null?void 0:s.data)==null?void 0:g.content.find(N=>N.id_cliente===Number(p)),v=X(w);d(v),k()};return e.jsx(B,{children:e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("section",{className:"bg-white px-4 pt-4 inline-flex justify-between items-center w-full border-b mb-4 ",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-1 pr-4 inline-flex items-center gap-2",children:[e.jsxs(G,{to:"/",children:[" ",n("home.title")]}),e.jsx(H,{}),e.jsx("span",{children:n("customers.title")})]}),e.jsx("span",{children:e.jsx("button",{className:"bg-orange-400 text-white p-1 shadow hover:scale-95",value:"refresh",onClick:j,children:e.jsx(J,{})})})]}),e.jsx("section",{className:"w-full bg-white divide-y border-b pb-4 mb-2.5",children:e.jsxs("section",{className:"w-full px-5 mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"w-44",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${o?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:k,type:"submit",disabled:o,children:[e.jsx(K,{}),n("customers.new"),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${o?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(Z,{searchValue:m,setSearchValue:l}),e.jsxs("button",{className:`max-w-24 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${o?"bg-sky-600/50":"bg-sky-600 active:scale-95 shadow"}`,onClick:D,type:"button",disabled:o,children:[e.jsx(Q,{}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${o?"animate-shineInfinity":"group-hover:animate-shine"} `})]})]})]})}),e.jsxs("section",{className:"md:w-11/12 lg:w-full min-h-96 flex flex-col justify-between items-center mx-auto ",children:[e.jsx("div",{className:"w-full flex h-5/6  min-h-96 justify-start items-center flex-col border mb-4 pb-2",children:e.jsx(L,{children:e.jsx(F,{t:n,customers:s&&((S=(z=s==null?void 0:s.data)==null?void 0:z.content)==null?void 0:S.length)>0&&(s==null?void 0:s.data.content)!=null?s==null?void 0:s.data.content:[],handleUpdate:E,loading:o})})}),e.jsx(ee,{page:i,totalPages:s!=null&&s.data&&(($=(I=s==null?void 0:s.data)==null?void 0:I.response)==null?void 0:$.length)>0?s==null?void 0:s.data.response[0].total_pages:0,setPage:h,loading:o})]}),e.jsx(W,{isOpen:V,onClose:C,children:e.jsx(Y,{isLoading:o,formValues:a,setFormValue:d,handleChange:T,handleSubmit:M})})]})})};export{de as default};
//# sourceMappingURL=CustomersPage-Dcbp3scs.js.map
