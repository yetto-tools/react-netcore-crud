{"version":3,"file":"LoginPage-DeeZUZcr.js","sources":["../../front-react/src/components/notifications/Messages.jsx","../../front-react/src/components/LoginForm.jsx","../../front-react/src/pages/LoginPage.jsx"],"sourcesContent":["import { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport function Message({\r\n  type,\r\n  message,\r\n  options, // Asegura que 'options' tiene un valor predeterminado si no se proporciona\r\n}) {\r\n  switch (type) {\r\n    case \"error\":\r\n      toast.error(message, { ...options, toastId: message });\r\n      break;\r\n    case \"info\":\r\n      toast.info(message, { ...options, toastId: message });\r\n      break;\r\n    case \"success\":\r\n      toast.success(message, { ...options, toastId: message });\r\n      break;\r\n    case \"warn\":\r\n      toast.warn(message, { ...options, toastId: message });\r\n      break;\r\n    default:\r\n      toast(message, { ...options, toastId: message });\r\n      break;\r\n  }\r\n}\r\n\r\nexport default Message;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { API } from \"../stores/API/Endpoints\";\r\nimport useUsuarioStore from \"../stores/useUsuarioStore\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useAuthStore from \"../stores/useAuthStore\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Message from \"./notifications/Messages\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport APIFetchData from \"../stores/useFetchDataStore\";\r\nimport useLoading from \"../stores/useLoading\";\r\n\r\nexport const LoginForm = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { login } = useAuthStore(); // Extrae la función de login\r\n  const refLoginForm = useRef(null);\r\n  const { isLoading, setIsLoading } = useLoading((state) => ({\r\n    isLoading: state.isLoading,\r\n    setIsLoading: state.setIsLoading,\r\n  }));\r\n\r\n  const { usuario, setUsuario } = useUsuarioStore((state) => ({\r\n    usuario: state.usuario,\r\n    setUsuario: state.setUsuario,\r\n  }));\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(refLoginForm.current);\r\n    const username = formData.get(\"username\");\r\n    const password = formData.get(\"password\");\r\n    if (username.length == 0) {\r\n      Message({ type: \"warn\", message: `${t(\"login.required_credentials\")}` });\r\n      return;\r\n    }\r\n\r\n    APIFetchData({\r\n      setStore: setUsuario,\r\n      url: API.login.url,\r\n      method: API.login.method,\r\n      body: { username, password },\r\n      setIsLoading: setIsLoading,\r\n    });\r\n    console.log(usuario);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      if (\r\n        usuario &&\r\n        usuario?.data?.response &&\r\n        usuario?.data?.response.length > 0 &&\r\n        usuario?.data?.response[0].message\r\n      ) {\r\n        // Esto mostrará un toast informativo con el mensaje\r\n        switch (usuario.data[\"response\"][0][\"result\"]) {\r\n          case -1:\r\n            Message({\r\n              type: \"error\",\r\n              message: `${usuario.data[\"response\"][0][\"message\"]}`,\r\n            });\r\n            break;\r\n          case 0:\r\n            Message({\r\n              type: \"warn\",\r\n              message: `${usuario.data[\"response\"][0][\"message\"]}`,\r\n            });\r\n            break;\r\n          case 1:\r\n            login({\r\n              name: usuario.data[\"content\"][0][\"nombre\"],\r\n              userData: usuario.data[\"content\"][0],\r\n              token: usuario.data[\"token\"][0],\r\n            }); // Ejecuta la acción de login\r\n            navigate(\"/\");\r\n            Message({\r\n              type: \"success\",\r\n              message: `${usuario.data[\"response\"][0][\"message\"]}: ${usuario.data[\"content\"][0][\"nombre\"]}`,\r\n              options: { autoClose: 2000 },\r\n            });\r\n            break;\r\n          default:\r\n            Message({\r\n              type: \"info\",\r\n              message: `${usuario.data[\"response\"][0][\"message\"]}`,\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }, [usuario, isLoading]);\r\n\r\n  if (isLoading && !usuario) {\r\n    return (\r\n      <>\r\n        <p className=\"font-semibold text-dsPrimaryLight px-2 py-2 bg-slate-50 border\">\r\n          Enviando...\r\n        </p>\r\n      </>\r\n    );\r\n  }\r\n  // if (error) {\r\n  //   const info = getData(API.login.url);\r\n  //   const msg = info.length == [] ? error : getData(API.login.url);\r\n\r\n  //   Message({ type: \"error\", message: `Error: ${msg}` });\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-white w-2/5 max-w-md min-w-80 h-96 border shadow-md flex justify-center items-center\">\r\n        <form ref={refLoginForm} className=\"w-full\">\r\n          <div className=\"w-full flex flex-col justify-between items-center gap-y-2.5\">\r\n            <div>\r\n              <span className=\"font-semibold text-2xl\">\r\n                {t(\"login.welcome\")}\r\n              </span>\r\n            </div>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold capitalize\">\r\n                {t(\"login.form.field.username\")}\r\n              </span>\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                placeholder={t(\"login.form.field.username\")}\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold capitalize\">\r\n                {t(\"login.form.field.password\")}\r\n              </span>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder={t(\"login.form.field.password\")}\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <div className=\"w-8/12 mx-auto text-right px-4\">\r\n              <Link\r\n                to=\"/register\"\r\n                className=\"font-medium text-sm text-sky-700 capitalize cursor-pointer\"\r\n              >\r\n                {t(\"register.title\")}\r\n              </Link>\r\n            </div>\r\n            <div className=\"flex flex-col flex-now justify-center items-center w-7/12 mx-auto mt-4\">\r\n              <button\r\n                className={`max-w-72  rounded-sm w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${\r\n                  !isLoading ? \"bg-sky-600 active:scale-95\" : \"bg-sky-600/50\"\r\n                }`}\r\n                onClick={handleLogin}\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n              >\r\n                {t(\"login.form.send\")}\r\n                <div\r\n                  className={`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${\r\n                    isLoading\r\n                      ? \"animate-shineInfinity\"\r\n                      : \"group-hover:animate-shine\"\r\n                  } `}\r\n                />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { LoginForm } from \"../components/LoginForm\";\r\nimport LayoutBasic from \"../layouts/LayoutBasic\";\r\n\r\nfunction LoginPage() {\r\n  return (\r\n    <LayoutBasic className=\"flex justify-center items-center w-screen mx-auto h-[720px]\">\r\n      <LoginForm />\r\n    </LayoutBasic>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"names":["Message","type","message","options","toast","LoginForm","useTranslation","navigate","useNavigate","login","useAuthStore","refLoginForm","useRef","isLoading","setIsLoading","useLoading","state","usuario","setUsuario","useUsuarioStore","handleLogin","event","formData","username","password","APIFetchData","API","useEffect","_a","_b","_c","jsx","Fragment","jsxs","Link","LoginPage","LayoutBasic"],"mappings":"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"}