import{c as y,B as c,u as j,a as k,r as x,b as N,d as v,j as e,L}from"./index-BCV8b7LP.js";import{A as u}from"./Endpoints-B5SrNEX0.js";import{L as $}from"./LayoutBasic-ClFP8b0b.js";const D=y(t=>({usuario:{response:[],content:[],token:[]},setUsuario:s=>t({usuario:s}),updateResponse:s=>t(a=>({usuario:{...a.usuario,response:s}})),updateContent:s=>t(a=>({usuario:{...a.usuario,content:s}})),updateToken:s=>t(a=>({usuario:{...a.usuario,token:s}}))}));function i({type:t,message:s,options:a}){switch(t){case"error":c.error(s,{...a,toastId:s});break;case"info":c.info(s,{...a,toastId:s});break;case"success":c.success(s,{...a,toastId:s});break;case"warn":c.warn(s,{...a,toastId:s});break;default:c(s,{...a,toastId:s});break}}const I=()=>{const{login:t}=j(),s=k(),a=x.useRef(null),{t:n}=N(),{usuario:g}=D(r=>({usuario:r.usuario})),{callApi:h,data:A,getData:m,loading:l,error:f}=v(r=>({callApi:r.callApi,data:r.data,getData:r.getData,loading:r.loading,error:r.error})),w=r=>{r.preventDefault();const d=new FormData(a.current),p=d.get("username"),b=d.get("password");if(p.length==0){i({type:"warn",message:`${n("login.required_credentials")}`});return}h(u.login.url,u.login.method,{username:p,password:b})},o=m(u.login.url);if(x.useEffect(()=>{if(!l&&o&&o.response&&o.response.length>0&&o.response[0].message)switch(o.response[0].result){case-1:i({type:"error",message:`${o.response[0].message}`});break;case 0:i({type:"warn",message:`${o.response[0].message}`});break;case 1:t({name:o.content[0].nombre,userData:o.content[0],token:o.token[0]}),s("/"),i({type:"success",message:`${o.response[0].message}: ${o.content[0].nombre}`,options:{autoClose:2e3}});break;default:i({type:"info",message:`${o.response[0].message}`})}},[o,l]),l&&!g)return e.jsx(e.Fragment,{children:e.jsx("p",{className:"font-semibold text-dsPrimaryLight px-2 py-2 bg-slate-50 border",children:"Enviando..."})});if(f){const d=m(u.login.url).length==[]?f:m(u.login.url);i({type:"error",message:`Error: ${d}`})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-white w-2/5 max-w-md min-w-80 h-96 border shadow-md flex justify-center items-center",children:e.jsx("form",{ref:a,className:"w-full",children:e.jsxs("div",{className:"w-full flex flex-col justify-between items-center gap-y-2.5",children:[e.jsx("div",{children:e.jsx("span",{className:"font-semibold text-2xl",children:n("login.welcome")})}),e.jsxs("label",{className:"flex flex-col flex-now w-7/12",children:[e.jsx("span",{className:"w-full px-1 py-1.5 font-semibold capitalize",children:n("login.form.field.username")}),e.jsx("input",{type:"text",name:"username",placeholder:n("login.form.field.username"),className:"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50"})]}),e.jsxs("label",{className:"flex flex-col flex-now w-7/12",children:[e.jsx("span",{className:"w-full px-1 py-1.5 font-semibold capitalize",children:n("login.form.field.password")}),e.jsx("input",{type:"password",name:"password",placeholder:n("login.form.field.password"),className:"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50"})]}),e.jsx("div",{className:"w-8/12 mx-auto text-right px-4",children:e.jsx(L,{to:"/register",className:"font-medium text-sm text-sky-700 capitalize cursor-pointer",children:n("register.title")})}),e.jsx("div",{className:"flex flex-col flex-now justify-center items-center w-7/12 mx-auto mt-4",children:e.jsxs("button",{className:`max-w-72  rounded-sm w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${l?"bg-sky-600/50":"bg-sky-600 active:scale-95"}`,onClick:w,type:"submit",disabled:l,children:[n("login.form.send"),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${l?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})]})})})})};function C(){return e.jsx($,{className:"flex justify-center items-center w-screen mx-auto h-[720px]",children:e.jsx(I,{})})}export{C as default};
//# sourceMappingURL=LoginPage-DOZoNrJt.js.map
