import{c as O,P as r,b as N,u as _,r as m,j as e,I as U,f as B,d as G,e as H,L as J,g as K,h as Q,i as W,k as X,M as Y}from"./index-7ezPRGVN.js";import{A as h}from"./Endpoints-CZBbmowt.js";import{T as I,s as Z}from"./TypesForm-D81Up11P.js";import{S as ee}from"./SeachInput-CfJ3_isW.js";import{P as se}from"./Pagination-gOfo6Yjq.js";const te=O(l=>({categories:[],setCategories:t=>l({categories:t})})),D=({loading:l,formValues:t,setFormValue:o,handleChange:i,handleSubmit:c})=>{const{t:s}=N(),{user:g}=_(f=>({user:f.user}));return m.useEffect(()=>{var p;let f=(p=g==null?void 0:g.userData)==null?void 0:p.id_usuario;o(x=>({...x,uid_creacion:f}))},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"md:w-10/12 min-h-96 flex flex-col justify-between items-center mx-auto my-10 border",children:e.jsxs("form",{className:"flex flex-wrap justify-between items-center gap-x-4 p-10",children:[e.jsxs("div",{className:"flex justify-between items-center gap-4 w-full",children:[e.jsx("section",{className:"w-10/12 mx-auto inline-flex justify-start",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${l?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:c,type:"submit",disabled:l,children:[e.jsx("span",{children:e.jsx(U,{})}),e.jsx("span",{children:t.id==0?s("categories.save"):s("categories.change")}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${l?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.state")}),e.jsx("input",{type:"checkbox",name:"estado",className:"px-2 py-1.5 border outline-none focus:border-sky-500 w-5 h-10 bg-slate-50",placeholder:s("categories.form.field.state"),onChange:i,checked:t.estado===1,required:!0})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-start items-center gap-4",children:[e.jsxs("label",{className:"flex-1 flex-col hidden",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.id")}),e.jsx("input",{type:"hidden",name:"id",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("categories.form.field.id"),onChange:i,value:t.id,disabled:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.name")}),e.jsx("input",{type:"nombre",name:"nombre",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("categories.form.field.name"),onChange:i,value:t.nombre,required:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col ",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.description")}),e.jsx("input",{type:"text",name:"descripcion",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("categories.form.field.description"),onChange:i,value:t.descripcion,required:!0})]}),e.jsxs("label",{className:"inline-flex flex-1 flex-col hidden",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.created")}),e.jsx("input",{type:"hidden",name:"uid_creacion",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("categories.form.field.created"),value:t.uid_creacion,onChange:i,required:!0,disabled:!0})]}),e.jsx("div",{className:"w-full",children:e.jsxs("label",{className:"inline-flex flex-1 flex-col w-full",children:[e.jsx("span",{className:"capitalize font-semibold text-sm py-1.5",children:s("categories.form.field.comment")}),e.jsx("textarea",{rows:"4",cols:"50",name:"comentario",className:"px-2 py-1.5 border outline-none focus:border-sky-500 bg-slate-50",placeholder:s("categories.form.field.comment"),onChange:i,value:t.comentario})]})})]})]})})})};D.propTypes={loading:r.bool,formValues:r.object,setFormValue:r.func,handleChange:r.func,handleSubmit:r.func};const P=({children:l})=>{const{t}=N();return e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"w-full flex mx-auto border justify-between items-center gap-4 px-4 bg-gray-800 text-white",children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:t("categories.form.field.name")})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:t("categories.form.field.description")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:t("categories.form.field.state")})," "]}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:t("categories.change")})," "]})]}),e.jsx("article",{className:"overflow-y-scroll h-96 w-full",children:l})]})},F=({t:l,categories:t,handleUpdate:o,loading:i})=>e.jsx(e.Fragment,{children:t.map((c,s)=>e.jsxs("div",{className:`w-full flex mx-auto border justify-between items-center  gap-4 px-4 py-2.5 text-slate-800 ${s%2==0?"bg-slate-100":"bg-white"} `,children:[e.jsxs("div",{className:"w-4/12 text-left",children:[e.jsx("span",{className:"capitalize font-semibold",children:c.nombre})," "]}),e.jsxs("div",{className:"w-4/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:c.descripcion||"-"})," "]}),e.jsx("div",{className:"w-2/12 text-center",children:e.jsx("span",{className:"capitalize text-center font-semibold inline-flex justify-center w-full items-center",children:c.estado==1?e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-sky-700 bg-sky-200 border-sky-700 font-semibold",children:l("state.active")}):e.jsx("span",{className:"text-center border rounded-full px-2 text-xs text-gray-700 bg-gray-200 border-gray-700 font-semibold",children:l("state.inactive")})})}),e.jsxs("div",{className:"w-2/12 text-center",children:[e.jsx("span",{className:"capitalize font-semibold",children:e.jsxs("button",{value:c.id_categoria,className:`max-w-24 rounded-sm text-xs outline-orange-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${i?"bg-orange-600/50":"bg-orange-600 active:scale-95 shadow"}`,onClick:o,type:"button",disabled:i,children:[e.jsx("span",{children:e.jsx(B,{})}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${i?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})," "]})]},`${c.id_categoria}${s}`))});P.propTypes={children:r.node};F.propTypes={t:r.func,categories:r.any,handleUpdate:r.func,loading:r.bool,index:r.number};const ce=()=>{var $,S;const{t:l}=N(),[t,o]=m.useState(I),[i,c]=m.useState(""),[s,g]=m.useState(1);m.useState(25);const[f,p]=m.useState(!1),{user:x}=_(a=>({user:a.user})),{setCategory:T}=te(a=>({setCategory:a.setCategory})),{callApi:v,getData:k,refreshData:C,loading:d,error:ae}=G(a=>({callApi:a.callApi,getData:a.getData,refreshData:a.refreshData,loading:a.loading,error:a.error})),n=k(`${h.category.categories.url}?page_size=25&page_number=${s}`);m.useEffect(()=>{var a;(a=x==null?void 0:x.userData)!=null&&a.id_usuario&&o(u=>({...u,uid_creacion:x.userData.id_usuario}))},[x]);const b=m.useCallback(()=>{C(`${h.category.categories.url}?page_size=25&page_number=${s}`)},[C,s]);m.useEffect(()=>{b()},[s,b]);const A=a=>{const{name:u,value:j,type:y,checked:w}=a.target,R=y==="checkbox"?w?1:0:j;o(V=>({...V,[u]:R}))},E=a=>{a.preventDefault(),v(`${h.category.url.save}`,"PUT",t)},z=()=>p(!0),M=()=>{o(I),p(!1)},q=()=>{v(`${h.category.search.url}?value=${i}`,h.category.search.method),k()==[]&&b()},L=a=>{const u=a.currentTarget.value,j=n.content.find(w=>w.id_categoria===Number(u)),y=Z(j);o(y),z()};return e.jsx(H,{children:e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("section",{className:"bg-white px-4 pt-4 inline-flex justify-between items-center w-full border-b mb-4 ",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-1 pr-4 inline-flex items-center gap-2",children:[e.jsxs(J,{to:"/",children:[" ",l("home.title")]}),e.jsx(K,{}),e.jsx("span",{}),l("categories.title")]}),e.jsx("span",{children:e.jsx("button",{className:"bg-orange-400 text-white p-1 shadow hover:scale-95",value:"refresh",onClick:b,children:e.jsx(Q,{})})})]}),e.jsx("section",{className:"w-full bg-white divide-y border-b pb-4 mb-2.5",children:e.jsxs("section",{className:"w-full px-2.5 mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"w-44",children:e.jsxs("button",{className:`inline-flex gap-4 max-w-32 rounded-sm w-full min-w-20 outline-green-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${d?"bg-green-600/50":"bg-green-600 active:scale-95 shadow"}`,onClick:z,type:"submit",disabled:d,children:[e.jsx("span",{children:e.jsx(W,{})}),e.jsx("span",{children:l("categories.new")}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${d?"animate-shineInfinity":"group-hover:animate-shine"} `})]})}),e.jsxs("div",{className:"inline-flex",children:[e.jsx(ee,{searchValue:i,setSearchValue:c}),e.jsxs("button",{className:`max-w-24 rounded-r outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden capitalize group ${d?"bg-sky-600/50":"bg-sky-600 active:scale-95 shadow"}`,onClick:q,type:"button",disabled:d,children:[e.jsx(X,{}),e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${d?"animate-shineInfinity":"group-hover:animate-shine"} `})]})]})]})}),e.jsxs("section",{className:"md:w-11/12 lg:w-full min-h-96 flex flex-col justify-between items-center mx-auto ",children:[e.jsx("div",{className:"w-full flex h-5/6  min-h-96 justify-start items-center flex-col border mb-4 pb-2",children:e.jsx(P,{children:e.jsx(F,{t:l,categories:n&&(($=n==null?void 0:n.content)==null?void 0:$.length)>0&&n.content!=null?n.content:[],handleUpdate:L,loading:d})})}),e.jsx(se,{page:s,totalPages:n&&((S=n==null?void 0:n.response)==null?void 0:S.length)>0?n.response[0].total_pages:0,setPage:T,loading:d})]}),e.jsx(Y,{isOpen:f,onClose:M,children:e.jsx(D,{loading:d,formValues:t,setFormValue:o,handleChange:A,handleSubmit:E})})]})})};export{ce as default};
//# sourceMappingURL=CategoriesPage-DY46njK7.js.map
