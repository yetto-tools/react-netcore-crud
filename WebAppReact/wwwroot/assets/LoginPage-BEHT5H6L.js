import{c as j,B as l,u as k,a as v,r as f,b as N,d as $,j as e,L as D}from"./index-DutmC7PB.js";import{A as c}from"./Endpoints-DNNrLCYu.js";const E=j(n=>({usuario:{response:[],content:[],token:[]},setUsuario:s=>n({usuario:s}),updateResponse:s=>n(a=>({usuario:{...a.usuario,response:s}})),updateContent:s=>n(a=>({usuario:{...a.usuario,content:s}})),updateToken:s=>n(a=>({usuario:{...a.usuario,token:s}}))}));function o({type:n,message:s,options:a}){switch(n){case"error":l.error(s,{...a,toastId:s});break;case"info":l.info(s,{...a,toastId:s});break;case"success":l.success(s,{...a,toastId:s});break;case"warn":l.warn(s,{...a,toastId:s});break;default:l(s,{...a,toastId:s});break}}const I=()=>{const{login:n}=k(),s=v(),a=f.useRef(null),{t:p}=N(),{usuario:x}=E(t=>({usuario:t.usuario})),{callApi:g,data:h,getData:u,loading:i,error:w}=$(t=>({callApi:t.callApi,data:t.data,getData:t.getData,loading:t.loading,error:t.error})),b=t=>{t.preventDefault();const d=new FormData(a.current),m=d.get("username"),y=d.get("password");if(m.length==0){o({type:"warn",message:`${p("login.required_credentials")}`});return}g(c.login.url,c.login.method,{username:m,password:y})},r=u(c.login.url);if(f.useEffect(()=>{if(console.log(h),!i&&r&&r.response&&r.response.length>0&&r.response[0].message){switch(r.response[0].result){case-1:o({type:"error",message:`${r.response[0].message}`});break;case 0:o({type:"warn",message:`${r.response[0].message}`,options:{position:"top-center"}});break;case 1:n({name:r.content[0].nombre,userData:r.content[0],token:r.token[0]}),s("/"),o("success",`${r.response[0].message}`);break;default:o("info",`${r.response[0].message}`)}console.log(r.response[0].message)}},[r,i]),i&&!x)return o({message:"Enviado: autenticaci√≥n"}),e.jsx(e.Fragment,{children:e.jsx("p",{className:"font-semibold text-dsPrimaryLight px-2 py-2 bg-slate-50 border",children:"Enviando..."})});if(w){const t=u(c.login.url);o({message:`Error: ${t}`})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-white w-2/5 max-w-md min-w-80 h-96 border shadow-md flex justify-center items-center",children:e.jsx("form",{ref:a,className:"w-full",children:e.jsxs("div",{className:"w-full flex flex-col justify-between items-center gap-y-2.5",children:[e.jsx("div",{children:e.jsx("span",{className:"font-semibold text-2xl",children:"Bienvenido"})}),e.jsxs("label",{className:"flex flex-col flex-now w-7/12",children:[e.jsx("span",{className:"w-full px-1 py-1.5 font-semibold",children:"Usuario"}),e.jsx("input",{type:"text",name:"username",placeholder:"Usuario",className:"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50"})]}),e.jsxs("label",{className:"flex flex-col flex-now w-7/12",children:[e.jsx("span",{className:"w-full px-1 py-1.5 font-semibold",children:"Clave"}),e.jsx("input",{type:"password",name:"password",placeholder:"Clave",className:"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50"})]}),e.jsx("div",{className:"w-8/12 mx-auto text-right px-4",children:e.jsx(D,{to:"/register",className:"font-medium text-sm text-sky-700 capitalize cursor-pointer",children:"registrarse"})}),e.jsx("div",{className:"flex flex-col flex-now justify-center items-center w-7/12 mx-auto mt-4",children:e.jsxs("button",{className:`max-w-72 w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${i?"bg-sky-600/50":"bg-sky-600 active:scale-95"}`,onClick:b,type:"submit",disabled:i,children:["Enviar",e.jsx("div",{className:`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${i?"animate-shineInfinity":"group-hover:animate-shine"} `})]})})]})})})})};function F(){return e.jsx("div",{className:"flex justify-center items-center w-screen h-screen",children:e.jsx(I,{})})}export{F as default};
//# sourceMappingURL=LoginPage-BEHT5H6L.js.map
