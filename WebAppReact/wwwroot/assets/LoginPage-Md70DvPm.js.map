{"version":3,"file":"LoginPage-Md70DvPm.js","sources":["../../front-react/src/stores/useUsuarioStore.jsx","../../front-react/src/components/notifications/Messages.jsx","../../front-react/src/components/LoginForm.jsx","../../front-react/src/pages/LoginPage.jsx"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nconst useUsuarioStore = create((set) => ({\r\n  usuario: {\r\n    response: [],\r\n    content: [],\r\n    token: [],\r\n  },\r\n\r\n  setUsuario: (newData) => set({ usuario: newData }),\r\n\r\n  updateResponse: (newResponse) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        response: newResponse,\r\n      },\r\n    })),\r\n\r\n  updateContent: (newContent) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        content: newContent,\r\n      },\r\n    })),\r\n\r\n  updateToken: (newToken) =>\r\n    set((state) => ({\r\n      usuario: {\r\n        ...state.usuario,\r\n        token: newToken,\r\n      },\r\n    })),\r\n}));\r\n\r\nexport default useUsuarioStore;\r\n","import { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport function Message({\r\n  type,\r\n  message,\r\n  options, // Asegura que 'options' tiene un valor predeterminado si no se proporciona\r\n}) {\r\n  switch (type) {\r\n    case \"error\":\r\n      toast.error(message, { ...options, toastId: message });\r\n      break;\r\n    case \"info\":\r\n      toast.info(message, { ...options, toastId: message });\r\n      break;\r\n    case \"success\":\r\n      toast.success(message, { ...options, toastId: message });\r\n      break;\r\n    case \"warn\":\r\n      toast.warn(message, { ...options, toastId: message });\r\n      break;\r\n    default:\r\n      toast(message, { ...options, toastId: message });\r\n      break;\r\n  }\r\n}\r\n\r\nexport default Message;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { API } from \"../stores/API/Endpoints\";\r\nimport useFetchDataStore from \"../stores/useFetchDataStore\";\r\nimport useUsuarioStore from \"../stores/useUsuarioStore\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useAuthStore from \"../stores/useAuthStore\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Message from \"./notifications/Messages\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const LoginForm = () => {\r\n  const { login } = useAuthStore(); // Extrae la función de login\r\n  const navigate = useNavigate();\r\n  const refLoginForm = useRef(null);\r\n  const { t } = useTranslation();\r\n\r\n  const { usuario } = useUsuarioStore((state) => ({\r\n    usuario: state.usuario,\r\n  }));\r\n\r\n  const { callApi, data, getData, loading, error } = useFetchDataStore(\r\n    (state) => ({\r\n      callApi: state.callApi,\r\n      data: state.data,\r\n      getData: state.getData,\r\n      loading: state.loading,\r\n      error: state.error,\r\n    })\r\n  );\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(refLoginForm.current);\r\n    const username = formData.get(\"username\");\r\n    const password = formData.get(\"password\");\r\n    if (username.length == 0) {\r\n      Message({ type: \"warn\", message: `${t(\"login.required_credentials\")}` });\r\n      return;\r\n    }\r\n\r\n    callApi(API.login.url, API.login.method, { username, password });\r\n  };\r\n\r\n  const datos = getData(API.login.url);\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      if (\r\n        datos &&\r\n        datos.response &&\r\n        datos.response.length > 0 &&\r\n        datos.response[0].message\r\n      ) {\r\n        // Esto mostrará un toast informativo con el mensaje\r\n        switch (datos[\"response\"][0][\"result\"]) {\r\n          case -1:\r\n            Message({\r\n              type: \"error\",\r\n              message: `${datos[\"response\"][0][\"message\"]}`,\r\n            });\r\n            break;\r\n          case 0:\r\n            Message({\r\n              type: \"warn\",\r\n              message: `${datos[\"response\"][0][\"message\"]}`,\r\n            });\r\n            break;\r\n          case 1:\r\n            login({\r\n              name: datos[\"content\"][0][\"nombre\"],\r\n              userData: datos[\"content\"][0],\r\n              token: datos[\"token\"][0],\r\n            }); // Ejecuta la acción de login\r\n            navigate(\"/\");\r\n            Message({\r\n              type: \"success\",\r\n              message: `${datos[\"response\"][0][\"message\"]}: ${datos[\"content\"][0][\"nombre\"]}`,\r\n              options: { autoClose: 2000 },\r\n            });\r\n            break;\r\n          default:\r\n            Message({\r\n              type: \"info\",\r\n              message: `${datos[\"response\"][0][\"message\"]}`,\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }, [datos, loading]);\r\n\r\n  if (loading && !usuario) {\r\n    return (\r\n      <>\r\n        <p className=\"font-semibold text-dsPrimaryLight px-2 py-2 bg-slate-50 border\">\r\n          Enviando...\r\n        </p>\r\n      </>\r\n    );\r\n  }\r\n  if (error) {\r\n    const info = getData(API.login.url);\r\n    const msg = info.length == [] ? error : getData(API.login.url);\r\n\r\n    Message({ type: \"error\", message: `Error: ${msg}` });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-white w-2/5 max-w-md min-w-80 h-96 border shadow-md flex justify-center items-center\">\r\n        <form ref={refLoginForm} className=\"w-full\">\r\n          <div className=\"w-full flex flex-col justify-between items-center gap-y-2.5\">\r\n            <div>\r\n              <span className=\"font-semibold text-2xl\">\r\n                {t(\"login.welcome\")}\r\n              </span>\r\n            </div>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold capitalize\">\r\n                {t(\"login.form.field.username\")}\r\n              </span>\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                placeholder={t(\"login.form.field.username\")}\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <label className=\"flex flex-col flex-now w-7/12\">\r\n              <span className=\"w-full px-1 py-1.5 font-semibold capitalize\">\r\n                {t(\"login.form.field.password\")}\r\n              </span>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder={t(\"login.form.field.password\")}\r\n                className=\"border px-2 py-1.5 outline-none focus:outline-sky-600 focus:bg-sky-50\"\r\n              />\r\n            </label>\r\n            <div className=\"w-8/12 mx-auto text-right px-4\">\r\n              <Link\r\n                to=\"/register\"\r\n                className=\"font-medium text-sm text-sky-700 capitalize cursor-pointer\"\r\n              >\r\n                {t(\"register.title\")}\r\n              </Link>\r\n            </div>\r\n            <div className=\"flex flex-col flex-now justify-center items-center w-7/12 mx-auto mt-4\">\r\n              <button\r\n                className={`max-w-72  rounded-sm w-full min-w-20 outline-sky-400 px-2.5 py-1.5 text-white font-semibold relative overflow-hidden group ${\r\n                  !loading ? \"bg-sky-600 active:scale-95\" : \"bg-sky-600/50\"\r\n                }`}\r\n                onClick={handleLogin}\r\n                type=\"submit\"\r\n                disabled={loading}\r\n              >\r\n                {t(\"login.form.send\")}\r\n                <div\r\n                  className={`absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-40 ${\r\n                    loading\r\n                      ? \"animate-shineInfinity\"\r\n                      : \"group-hover:animate-shine\"\r\n                  } `}\r\n                />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { LoginForm } from \"../components/LoginForm\";\r\nimport LayoutBasic from \"../layouts/LayoutBasic\";\r\n\r\nfunction LoginPage() {\r\n  return (\r\n    <LayoutBasic className=\"flex justify-center items-center w-screen mx-auto h-[720px]\">\r\n      <LoginForm />\r\n    </LayoutBasic>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"names":["useUsuarioStore","create","set","newData","newResponse","state","newContent","newToken","Message","type","message","options","toast","LoginForm","login","useAuthStore","navigate","useNavigate","refLoginForm","useRef","t","useTranslation","usuario","callApi","data","getData","loading","error","useFetchDataStore","handleLogin","event","formData","username","password","API","datos","useEffect","jsx","msg","Fragment","jsxs","Link","LoginPage","LayoutBasic"],"mappings":"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"}